package syo1;
import java.util.*;


public class Main {
    public static void main(String[] args) {
        // 自分の得意な言語で
        // Let's チャレンジ！！

        Scanner sc = new Scanner(System.in);
        int N = sc.nextInt();//回転する回数
        int H = sc.nextInt();//マス目の縦の大きさ
        int W = sc.nextInt();//マス目の横の大きさ
        int[][] map = new int[H][W];
        int sy = sc.nextInt();//最初にサイコロを置く行
        int sx = sc.nextInt();//最初にサイコロを置く列
        map[sy-1][sx-1] = 6;
        String sp = sc.next();
        String[] s = sp.split("");//移動方法
        int dice = 6;
        String compass = "North";


        for(int i = 0; i < N; i++){
            switch(dice){

                case 1:
                    switch(compass){
                        case "North":
                            switch(s[i]){
                                case "U":
                                    sy -= 1;
                                    dice = 2;
                                    map[sy-1][sx-1] = 2;

                                case "D":
                                    sy += 1;
                                    dice = 5;
                                    map[sy-1][sx-1] = 5;

                                case "L":
                                    sx -= 1;
                                    dice = 4;
                                    map[sy-1][sx-1] = 4;

                                case "R":
                                    sx += 1;
                                    dice = 3;
                                    map[sy-1][sx-1] = 3;
                            }
                            break;

                        case "West":
                            switch(s[i]){
                                case "U":
                                    sy -= 1;
                                    dice = 4;
                                    map[sy-1][sx-1] = 4;

                                case "D":
                                    sy += 1;
                                    dice = 3;
                                    map[sy-1][sx-1] = 3;

                                case "L":
                                    sx -= 1;
                                    dice = 5;
                                    map[sy-1][sx-1] = 5;

                                case "R":
                                    sx += 1;
                                    dice = 2;
                                    map[sy-1][sx-1] = 2;
                            }
                            break;

                        case "East":
                            switch(s[i]){
                                case "U":
                                    sy -= 1;
                                    dice = 3;
                                    map[sy-1][sx-1] = 3;

                                case "D":
                                    sy += 1;
                                    dice = 4;
                                    map[sy-1][sx-1] = 4;

                                case "L":
                                    sx -= 1;
                                    dice = 2;
                                    map[sy-1][sx-1] = 2;

                                case "R":
                                    sx += 1;
                                    dice = 5;
                                    map[sy-1][sx-1] = 5;
                            }
                            break;

                        case "South":
                            switch(s[i]){
                                case "U":
                                    sy -= 1;
                                    dice = 5;
                                    map[sy-1][sx-1] = 5;

                                case "D":
                                    sy += 1;
                                    dice = 5;
                                    map[sy-1][sx-1] = 5;

                                case "L":
                                    sx -= 1;
                                    dice = 3;
                                    map[sy-1][sx-1] = 3;

                                case "R":
                                    sx += 1;
                                    dice = 4;
                                    map[sy-1][sx-1] = 4;
                            }
                            break;
                    }
                    break;

                case 2:
                    switch(compass){
                        case "North":
                            switch(s[i]){
                                case "U":
                                    sy -= 1;
                                    dice = 6;
                                    map[sy-1][sx-1] = 6;

                                case "D":
                                    sy += 1;
                                    dice = 1;
                                    map[sy-1][sx-1] = 1;

                                case "L":
                                    sx -= 1;
                                    dice = 4;
                                    map[sy-1][sx-1] = 4;
                                    compass = "West";

                                case "R":
                                    sx += 1;
                                    dice = 3;
                                    map[sy-1][sx-1] = 3;
                                    compass = "East";
                            }
                            break;

                        case "West":
                            switch(s[i]){
                                case "U":
                                    sy -= 1;
                                    dice = 4;
                                    map[sy-1][sx-1] = 4;
                                    compass ="South";

                                case "D":
                                    sy += 1;
                                    dice = 3;
                                    map[sy-1][sx-1] = 3;
                                    compass ="North";

                                case "L":
                                    sx -= 1;
                                    dice = 1;
                                    map[sy-1][sx-1] = 1;

                                case "R":
                                    sx += 1;
                                    dice = 6;
                                    map[sy-1][sx-1] = 6;
                            }
                            break;

                        case "East":
                            switch(s[i]){
                                case "U":
                                    sy -= 1;
                                    dice = 3;
                                    map[sy-1][sx-1] = 3;
                                    compass ="South";

                                case "D":
                                    sy += 1;
                                    dice = 4;
                                    map[sy-1][sx-1] = 4;
                                    compass ="North";

                                case "L":
                                    sx -= 1;
                                    dice = 6;
                                    map[sy-1][sx-1] = 6;

                                case "R":
                                    sx += 1;
                                    dice = 1;
                                    map[sy-1][sx-1] = 1;
                            }
                            break;

                        case "South":
                            switch(s[i]){
                                case "U":
                                    sy -= 1;
                                    dice = 1;
                                    map[sy-1][sx-1] = 1;

                                case "D":
                                    sy += 1;
                                    dice = 6;
                                    map[sy-1][sx-1] = 6;

                                case "L":
                                    sx -= 1;
                                    dice = 3;
                                    map[sy-1][sx-1] = 3;
                                    compass ="West";

                                case "R":
                                    sx += 1;
                                    dice = 4;
                                    map[sy-1][sx-1] = 4;
                                    compass ="East";
                            }
                            break;
                    }
                    break;

                case 3:
                    switch(compass){
                        case "North":
                            switch(s[i]){
                                case "U":
                                    sy -= 1;
                                    dice = 2;
                                    map[sy-1][sx-1] = 2;
                                    compass ="West";

                                case "D":
                                    sy += 1;
                                    dice = 5;
                                    map[sy-1][sx-1] = 5;
                                    compass ="East";

                                case "L":
                                    sx -= 1;
                                    dice = 1;
                                    map[sy-1][sx-1] = 1;

                                case "R":
                                    sx += 1;
                                    dice = 6;
                                    map[sy-1][sx-1] = 6;
                            }
                            break;

                        case "West":
                            switch(s[i]){
                                case "U":
                                    sy -= 1;
                                    dice = 1;
                                    map[sy-1][sx-1] = 1;

                                case "D":
                                    sy += 1;
                                    dice = 6;
                                    map[sy-1][sx-1] = 6;
                                    compass ="East";

                                case "L":
                                    sx -= 1;
                                    dice = 5;
                                    map[sy-1][sx-1] = 5;
                                    compass ="North";

                                case "R":
                                    sx += 1;
                                    dice = 2;
                                    map[sy-1][sx-1] = 2;
                                    compass ="South";
                            }
                            break;

                        case "East":
                            switch(s[i]){
                                case "U":
                                    sy -= 1;
                                    dice = 6;
                                    map[sy-1][sx-1] = 6;
                                    compass ="West";

                                case "D":
                                    sy += 1;
                                    dice = 1;
                                    map[sy-1][sx-1] = 1;

                                case "L":
                                    sx -= 1;
                                    dice = 2;
                                    map[sy-1][sx-1] = 2;
                                    compass ="North";

                                case "R":
                                    sx += 1;
                                    dice = 5;
                                    map[sy-1][sx-1] = 5;
                                    compass ="South";
                            }
                            break;

                        case "South":
                            switch(s[i]){
                                case "U":
                                    sy -= 1;
                                    dice = 5;
                                    map[sy-1][sx-1] = 5;
                                    compass ="West";

                                case "D":
                                    sy += 1;
                                    dice = 2;
                                    map[sy-1][sx-1] = 2;
                                    compass ="East";

                                case "L":
                                    sx -= 1;
                                    dice = 6;
                                    map[sy-1][sx-1] = 6;
                                    compass ="North";

                                case "R":
                                    sx += 1;
                                    dice = 1;
                                    map[sy-1][sx-1] = 1;
                            }
                            break;
                    }
                    break;

                case 4:
                    switch(compass){
                        case "North":
                            switch(s[i]){
                                case "U":
                                    sy -= 1;
                                    dice = 2;
                                    map[sy-1][sx-1] = 2;
                                    compass ="East";

                                case "D":
                                    sy += 1;
                                    dice = 5;
                                    map[sy-1][sx-1] = 5;
                                    compass ="West";

                                case "L":
                                    sx -= 1;
                                    dice = 6;
                                    map[sy-1][sx-1] = 6;
                                    compass ="South";

                                case "R":
                                    sx += 1;
                                    dice = 1;
                                    map[sy-1][sx-1] = 1;
                            }
                            break;

                        case "West":
                            switch(s[i]){
                                case "U":
                                    sy -= 1;
                                    dice = 6;
                                    map[sy-1][sx-1] = 6;
                                    compass ="East";

                                case "D":
                                    sy += 1;
                                    dice = 1;
                                    map[sy-1][sx-1] = 1;

                                case "L":
                                    sx -= 1;
                                    dice = 5;
                                    map[sy-1][sx-1] = 5;
                                    compass ="South";

                                case "R":
                                    sx += 1;
                                    dice = 2;
                                    map[sy-1][sx-1] = 2;
                                    compass ="North";
                            }
                            break;

                        case "East":
                            switch(s[i]){
                                case "U":
                                    sy -= 1;
                                    dice = 1;
                                    map[sy-1][sx-1] = 1;

                                case "D":
                                    sy += 1;
                                    dice = 6;
                                    map[sy-1][sx-1] = 6;
                                    compass ="West";

                                case "L":
                                    sx -= 1;
                                    dice = 2;
                                    map[sy-1][sx-1] = 2;
                                    compass ="South";

                                case "R":
                                    sx += 1;
                                    dice = 5;
                                    map[sy-1][sx-1] = 5;
                                    compass ="North";
                            }
                            break;

                        case "South":
                            switch(s[i]){
                                case "U":
                                    sy -= 1;
                                    dice = 5;
                                    map[sy-1][sx-1] = 5;
                                    compass ="East";

                                case "D":
                                    sy += 1;
                                    dice = 2;
                                    map[sy-1][sx-1] = 2;
                                    compass ="West";

                                case "L":
                                    sx -= 1;
                                    dice = 1;
                                    map[sy-1][sx-1] = 1;

                                case "R":
                                    sx += 1;
                                    dice = 6;
                                    map[sy-1][sx-1] = 6;
                                    compass ="North";
                            }
                            break;
                    }
                    break;

                case 5:
                    switch(compass){
                        case "North":
                            switch(s[i]){
                                case "U":
                                    sy -= 1;
                                    dice = 1;
                                    map[sy-1][sx-1] = 1;

                                case "D":
                                    sy += 1;
                                    dice = 6;
                                    map[sy-1][sx-1] = 6;

                                case "L":
                                    sx -= 1;
                                    dice = 4;
                                    map[sy-1][sx-1] = 4;
                                    compass ="East";

                                case "R":
                                    sx += 1;
                                    dice = 3;
                                    map[sy-1][sx-1] = 3;
                                    compass ="West";
                            }
                            break;

                        case "West":
                            switch(s[i]){
                                case "U":
                                    sy -= 1;
                                    dice = 4;
                                    map[sy-1][sx-1] = 4;
                                    compass ="North";

                                case "D":
                                    sy += 1;
                                    dice = 3;
                                    map[sy-1][sx-1] = 3;
                                    compass ="South";

                                case "L":
                                    sx -= 1;
                                    dice = 6;
                                    map[sy-1][sx-1] = 6;

                                case "R":
                                    sx += 1;
                                    dice = 1;
                                    map[sy-1][sx-1] = 1;
                            }
                            break;

                        case "East":
                            switch(s[i]){
                                case "U":
                                    sy -= 1;
                                    dice = 3;
                                    map[sy-1][sx-1] = 3;
                                    compass ="North";

                                case "D":
                                    sy += 1;
                                    dice = 4;
                                    map[sy-1][sx-1] = 4;
                                    compass ="South";

                                case "L":
                                    sx -= 1;
                                    dice = 1;
                                    map[sy-1][sx-1] = 1;

                                case "R":
                                    sx += 1;
                                    dice = 6;
                                    map[sy-1][sx-1] = 6;
                            }
                            break;

                        case "South":
                            switch(s[i]){
                                case "U":
                                    sy -= 1;
                                    dice = 6;
                                    map[sy-1][sx-1] = 6;

                                case "D":
                                    sy += 1;
                                    dice = 1;
                                    map[sy-1][sx-1] = 1;

                                case "L":
                                    sx -= 1;
                                    dice = 3;
                                    map[sy-1][sx-1] = 3;
                                    compass ="East";

                                case "R":
                                    sx += 1;
                                    dice = 4;
                                    map[sy-1][sx-1] = 4;
                                    compass ="West";
                            }
                            break;
                    }
                    break;

                case 6:
                    switch(compass){
                        case "North":
                            switch(s[i]){
                                case "U":
                                    sy -= 1;
                                    dice = 5;
                                    map[sy-1][sx-1] = 5;

                                case "D":
                                    sy += 1;
                                    dice = 2;
                                    map[sy-1][sx-1] = 2;

                                case "L":
                                    sx -= 1;
                                    dice = 4;
                                    map[sy-1][sx-1] = 4;
                                    compass ="South";

                                case "R":
                                    sx += 1;
                                    dice = 3;
                                    map[sy-1][sx-1] = 3;
                                    compass ="South";
                            }
                            break;

                        case "West":
                            switch(s[i]){
                                case "U":
                                    sy -= 1;
                                    dice = 4;
                                    map[sy-1][sx-1] = 4;
                                    compass ="East";

                                case "D":
                                    sy += 1;
                                    dice = 3;
                                    map[sy-1][sx-1] = 3;
                                    compass ="East";

                                case "L":
                                    sx -= 1;
                                    dice = 2;
                                    map[sy-1][sx-1] = 2;

                                case "R":
                                    sx += 1;
                                    dice = 5;
                                    map[sy-1][sx-1] = 5;
                            }
                            break;

                        case "East":
                            switch(s[i]){
                                case "U":
                                    sy -= 1;
                                    dice = 3;
                                    map[sy-1][sx-1] = 3;
                                    compass ="West";

                                case "D":
                                    sy += 1;
                                    dice = 4;
                                    map[sy-1][sx-1] = 4;
                                    compass ="West";

                                case "L":
                                    sx -= 1;
                                    dice = 5;
                                    map[sy-1][sx-1] = 5;

                                case "R":
                                    sx += 1;
                                    dice = 2;
                                    map[sy-1][sx-1] = 2;
                            }
                            break;

                        case "South":
                            switch(s[i]){
                                case "U":
                                    sy -= 1;
                                    dice = 2;
                                    map[sy-1][sx-1] = 2;

                                case "D":
                                    sy += 1;
                                    dice = 5;
                                    map[sy-1][sx-1] = 5;

                                case "L":
                                    sx -= 1;
                                    dice = 3;
                                    map[sy-1][sx-1] = 3;
                                    compass ="North";

                                case "R":
                                    sx += 1;
                                    dice = 4;
                                    map[sy-1][sx-1] = 4;
                                    compass ="North";
                            }
                            break;
                    }
                    break;
            }
        }




        for(int i = 0; i < H; i++){
            for(int j = 0; j < W; j++){
                System.out.print(map[i][j]);
                System.out.print(" ");
            }
            System.out.println("");
        }

    }
}